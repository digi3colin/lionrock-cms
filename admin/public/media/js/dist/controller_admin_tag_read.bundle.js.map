{"version":3,"file":"controller_admin_tag_read.bundle.js","mappings":"mBAAA,SAASA,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,EAChD,CACF,ECRqBO,W,cCAN,SAAyBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,oCAExB,C,SFMe,IAAsBD,EAAyBE,E,OAAzBF,E,EAAyBE,E,6BCT5D,WACE,IAAMC,EAAaC,SAASC,eAAe,YACvCF,GAEJA,EAAWG,iBAAiB,UAAU,SAAAC,GACpCA,EAAIC,cAAcC,KAAKC,QACxB,GACF,G,4BAED,WACE,IACMC,EADUP,SAASQ,cAAc,QACdC,aAAa,QACrBT,SAASU,iBAAiB,oBAClCC,SAAQ,SAAAC,GACf,IAAMC,EAAWD,EAAGH,aAAa,iBAEjCK,MAAM,oBAAD,OAAqBD,EAArB,qBAA0CN,IAAYQ,MAAK,SAAAC,GAC9DA,EAAIC,OAAOF,MAAK,SAAAG,GACdC,QAAQC,IAAIF,EACb,GACF,IACDC,QAAQC,IAAIR,EACb,IAEoBZ,SAASU,iBAAiB,yBAClCC,SAAQ,SAAAC,GACnB,IAAMS,EAAgBT,EAAGU,UACnBC,EAAQX,EAAGH,aAAa,cACxBI,EAAWD,EAAGH,aAAa,iBAC3Be,EAAWZ,EAAGH,aAAa,aAC3BgB,EAAM,yBAAH,OAA4BZ,EAA5B,YAAwCW,EAAxC,qBAA6DjB,GACtEK,EAAGU,UAAH,uCACAR,MAAMW,GAAKV,MAAK,SAAAC,GACdA,EAAIC,OAAOF,MAAK,SAAAW,GACd,IAAMC,EAAU,CAACN,GACjBK,EAAMf,SAAQ,SAAAiB,GACZD,EAAQE,KAAR,2BAAiCD,EAAKE,KAAtC,OACAF,EAAKG,MAAMpB,SAAQ,SAAAqB,GACjBL,EAAQE,KAAR,yBAA+BG,EAAKC,GAApC,aAA4CD,EAAKC,GAAGC,aAAeX,EAAS,WAAa,GAAzF,YAAgGS,EAAKF,KAArG,aACD,IACDH,EAAQE,KAAR,cACD,IACDjB,EAAGU,UAAYK,EAAQQ,KAAK,KAC7B,GACF,GACF,GACF,G,yBAED,WACE,IAAMC,EAAapC,SAASC,eAAe,aAC3C,GAAGmC,EAAW,CACZ,IAAMC,EAAcD,EAAW5B,cAAc,UACvC8B,EAAWF,EAAW5B,cAAc,KAE1C6B,EAAYnC,iBAAiB,UAAU,WACrCoC,EAASC,aAAa,OAAQD,EAAS7B,aAAa,aAAa+B,QAAQ,eAAgBH,EAAYd,OACtG,GACF,CACF,G,wBAED,SAAkBkB,EAAQC,EAAOC,GAC/B7B,MAAM,mBAAD,OAAoB2B,EAApB,gBAAkCC,GAAS,CAC9CE,YAAa,UACbC,OAAQ,SACP9B,MAAK,SAAAC,GAAG,OAAIA,EAAIC,OAAOF,MAAK,SAAA+B,GAC7B3B,QAAQC,IAAI0B,IACe,IAAxBA,EAAIC,QAAQC,SACfL,EAAGG,EAAIC,QACR,GAJU,GAKZ,G,2BAED,WAAsB,WACpB/C,SAASU,iBAAiB,kBAAkBC,SAAQ,SAAAsC,GAClD,IAAMR,EAASQ,EAAGxC,aAAa,aACzByC,EAAaD,EAAGzC,cAAc,kBAC9B2C,EAAcF,EAAGzC,cAAc,kBAE/B4C,EAAgB,SAAAjD,GACpB,IAAMkD,EAAUlD,EAAIC,cAEpBU,MAAM,uBAAD,OAAwBuC,EAAQ5C,aAAa,YAAc,CAC9DmC,YAAa,UACbC,OAAQ,WACP9B,MAAK,SAAAC,GAAG,OAAIA,EAAIC,OAAOF,MAAK,SAAAG,GAC7BC,QAAQC,IAAIF,GACZmC,EAAQC,QACT,GAHU,GAIZ,EAEDL,EAAGzC,cAAc,qBAAqBN,iBAAiB,SAAS,SAAAmD,GAC3DH,EAAWK,UAAUC,SAAS,mBAC/BN,EAAWK,UAAUD,OAAO,mBAE5BJ,EAAWK,UAAUE,IAAI,kBAE5B,IAEDR,EAAGvC,iBAAiB,mBAAmBC,SAAQ,SAAA+C,GAC7CA,EAAWxD,iBAAiB,QAASkD,EACtC,IAEDF,EAAWhD,iBAAiB,UAAU,WACpC,IAAMyD,EAASV,EAAGzC,cAAH,wBAAkC0C,EAAW3B,MAA7C,OACf,GAAIoC,EAAJ,CACA,IAAMC,EAASD,EAAOlD,aAAa,WAC7BoD,EAAYF,EAAOlD,aAAa,cAChCqD,EAAWH,EAAOlD,aAAa,aAErC,EAAKsD,WAAWtB,EAAQmB,GAAQ,SAACb,GAC/B,IAAMiB,EAAShE,SAASiE,cAAc,QACtCD,EAAOzC,MAAP,UAAkBsC,EAAlB,cAAiCC,EAAjC,MACAE,EAAOzB,aAAa,UAAWQ,EAAQd,IACvC+B,EAAOzB,aAAa,OAAQ,UAC5ByB,EAAOT,UAAUE,IAAI,QAAS,aAAc,gBAC5CO,EAAO1C,UAAP,UAAsBuC,EAAtB,iCACAV,EAAYe,YAAYF,GACxBb,EAAYe,YAAYlE,SAASmE,eAAe,MAChDjB,EAAW3B,MAAQ,GACnByC,EAAO9D,iBAAiB,QAASkD,EAClC,GAhBgB,CAiBlB,GACF,GACF,I,MDhHetE,EAAkBc,EAAYwE,U,MAC1CtE,GAAahB,EAAkBc,EAAaE,GAChDP,OAAOC,eAAeI,EAAa,YAAa,CAC9CN,UAAU,I,GCdOI,GEEV2E,iBAEXrE,SAASU,iBAAiB,6BAA6BC,SAAQ,SAAAsC,GAC7D,IAAMC,EAAaD,EAAGzC,cAAc,oCAC9B8D,EAAarB,EAAGzC,cAAc,mCAEpC0C,EAAWhD,iBAAiB,UAAU,WACpC,IAAMyD,EAASV,EAAGzC,cAAH,wBAAkC0C,EAAW3B,MAA7C,OACf+C,EAAW/C,MAAQoC,EAASA,EAAOlD,aAAa,WAAa,EAC9D,GACF,G","sources":["webpack:///../../../../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./classes/helper/Page.mjs","webpack:///../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./entry/admin/tags/read.js"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default class HelperPage{\n  static enableAutoSave(){\n    const cbAutoSave = document.getElementById('autosave');\n    if(!cbAutoSave)return;\n\n    cbAutoSave.addEventListener('change', evt => {\n      evt.currentTarget.form.submit();\n    })\n  }\n\n  static enablePointers(){\n    const domRoot = document.querySelector('html');\n    const language = domRoot.getAttribute('lang');\n    const refPages = document.querySelectorAll('select.ref-pages');\n    refPages.forEach(it => {\n      const pageType = it.getAttribute('data-pagetype');\n\n      fetch(`/admin/api/pages/${pageType}?language=${language}`).then(res => {\n        res.json().then(obj =>{\n          console.log(obj);\n        })\n      })\n      console.log(it);\n    });\n\n    const refPageItems = document.querySelectorAll('select.ref-page-items');\n    refPageItems.forEach(it => {\n      const sourceOptions = it.innerHTML;\n      const value = it.getAttribute('data-value');\n      const pageType = it.getAttribute('data-pagetype');\n      const itemName = it.getAttribute('data-item');\n      const url = `/admin/api/page-items/${pageType}/${itemName}?language=${language}`;\n      it.innerHTML = `<option value=\"\">Loading...</option>`;\n      fetch(url).then(res =>{\n        res.json().then(pages =>{\n          const options = [sourceOptions];\n          pages.forEach(page => {\n            options.push(`<optgroup label=\"${page.name}\">`)\n            page.items.forEach(item => {\n              options.push(`<option value=\"${item.id}\" ${(item.id.toString() === value) ? 'selected' : '' }>${item.name}</option>`);\n            })\n            options.push(`</optgroup>`);\n          })\n          it.innerHTML = options.join('/n');\n        });\n      });\n    });\n  }\n\n  static enableBlock(){\n    const elAddBlock = document.getElementById('add-block');\n    if(elAddBlock){\n      const blockSelect = elAddBlock.querySelector('select');\n      const blockBtn = elAddBlock.querySelector('a');\n\n      blockSelect.addEventListener('change', () =>{\n        blockBtn.setAttribute('href', blockBtn.getAttribute('data-link').replace('[block_name]', blockSelect.value))\n      })\n    }\n  }\n\n  static addPageTag(pageId, tagId, cb){\n    fetch(`/admin/api/page/${pageId}/tag/${tagId}`, {\n      credentials: 'include',\n      method: \"POST\",\n    }).then(res => res.json().then(fsa => {\n      console.log(fsa);\n      if(fsa.payload.success !== true)return;\n      cb(fsa.payload);\n    }))\n  }\n\n  static enablePageTag(){\n    document.querySelectorAll('.page-tag-form').forEach(el => {\n      const pageId = el.getAttribute('data-page');\n      const inputField = el.querySelector('.tag-add-input');\n      const pageTagList = el.querySelector('.page-tag-list');\n\n      const removePageTag = evt => {\n        const element = evt.currentTarget;\n\n        fetch(`/admin/api/page_tag/${element.getAttribute('data-id')}`, {\n          credentials: 'include',\n          method: \"DELETE\",\n        }).then(res => res.json().then(obj => {\n          console.log(obj);\n          element.remove();\n        }))\n      }\n\n      el.querySelector('.toggle-input-tag').addEventListener('click', element => {\n        if(inputField.classList.contains('visually-hidden')){\n          inputField.classList.remove('visually-hidden');\n        }else{\n          inputField.classList.add('visually-hidden');\n        }\n      })\n\n      el.querySelectorAll('.page-tag.badge').forEach(tagElement => {\n        tagElement.addEventListener('click', removePageTag);\n      })\n\n      inputField.addEventListener('change', () => {\n        const option = el.querySelector(`option[value=\"${inputField.value}\"]`);\n        if(!option)return;\n        const tag_id = option.getAttribute('data-id');\n        const tag_value = option.getAttribute('data-value');\n        const tag_name = option.getAttribute('data-name');\n\n        this.addPageTag(pageId, tag_id, (payload) => {\n          const newTag = document.createElement('span');\n          newTag.value = `${tag_value} ( ${tag_name} )`;\n          newTag.setAttribute('data-id', payload.id);\n          newTag.setAttribute('role', \"button\");\n          newTag.classList.add(\"badge\", \"bg-primary\", \"rounded-pill\");\n          newTag.innerHTML = `${tag_value} <i class=\"fas fa-times\"></i>`;\n          pageTagList.appendChild(newTag);\n          pageTagList.appendChild(document.createTextNode(' '));\n          inputField.value = '';\n          newTag.addEventListener('click', removePageTag);\n        })\n      });\n    })\n  }\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import HelperPage from \"../../../classes/helper/Page.mjs\";\n\nHelperPage.enableAutoSave();\n\ndocument.querySelectorAll('.page-field-auto-complete').forEach(el => {\n  const inputField = el.querySelector('.page-field-auto-complete-search');\n  const valueField = el.querySelector('.page-field-auto-complete-value');\n\n  inputField.addEventListener('change', () =>{\n    const option = el.querySelector(`option[value=\"${inputField.value}\"]`);\n    valueField.value = option ? option.getAttribute('data-id') : '';\n  })\n})"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","HelperPage","instance","Constructor","TypeError","staticProps","cbAutoSave","document","getElementById","addEventListener","evt","currentTarget","form","submit","language","querySelector","getAttribute","querySelectorAll","forEach","it","pageType","fetch","then","res","json","obj","console","log","sourceOptions","innerHTML","value","itemName","url","pages","options","page","push","name","items","item","id","toString","join","elAddBlock","blockSelect","blockBtn","setAttribute","replace","pageId","tagId","cb","credentials","method","fsa","payload","success","el","inputField","pageTagList","removePageTag","element","remove","classList","contains","add","tagElement","option","tag_id","tag_value","tag_name","addPageTag","newTag","createElement","appendChild","createTextNode","prototype","enableAutoSave","valueField"],"sourceRoot":""}