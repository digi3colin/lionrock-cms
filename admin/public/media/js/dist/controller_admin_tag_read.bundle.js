(()=>{"use strict";function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var a,n;return a=t,n=[{key:"enableAutoSave",value:function(){var e=document.getElementById("autosave");e&&e.addEventListener("change",(function(e){e.currentTarget.form.submit()}))}},{key:"enablePointers",value:function(){var e=document.querySelector("html").getAttribute("lang");document.querySelectorAll("select.ref-pages").forEach((function(t){var a=t.getAttribute("data-pagetype");fetch("/admin/api/pages/".concat(a,"?language=").concat(e)).then((function(e){e.json().then((function(e){console.log(e)}))})),console.log(t)})),document.querySelectorAll("select.ref-page-items").forEach((function(t){var a=t.innerHTML,n=t.getAttribute("data-value"),o=t.getAttribute("data-pagetype"),c=t.getAttribute("data-item"),i="/admin/api/page-items/".concat(o,"/").concat(c,"?language=").concat(e);t.innerHTML='<option value="">Loading...</option>',fetch(i).then((function(e){e.json().then((function(e){var o=[a];e.forEach((function(e){o.push('<optgroup label="'.concat(e.name,'">')),e.items.forEach((function(e){o.push('<option value="'.concat(e.id,'" ').concat(e.id.toString()===n?"selected":"",">").concat(e.name,"</option>"))})),o.push("</optgroup>")})),t.innerHTML=o.join("/n")}))}))}))}},{key:"enableBlock",value:function(){var e=document.getElementById("add-block");if(e){var t=e.querySelector("select"),a=e.querySelector("a");t.addEventListener("change",(function(){a.setAttribute("href",a.getAttribute("data-link").replace("[block_name]",t.value))}))}}},{key:"addPageTag",value:function(e,t,a){fetch("/admin/api/page/".concat(e,"/tag/").concat(t),{credentials:"include",method:"POST"}).then((function(e){return e.json().then((function(e){console.log(e),!0===e.payload.success&&a(e.payload)}))}))}},{key:"enablePageTag",value:function(){var e=this;document.querySelectorAll(".page-tag-form").forEach((function(t){var a=t.getAttribute("data-page"),n=t.querySelector(".tag-add-input"),o=t.querySelector(".page-tag-list"),c=function(e){var t=e.currentTarget;fetch("/admin/api/page_tag/".concat(t.getAttribute("data-id")),{credentials:"include",method:"DELETE"}).then((function(e){return e.json().then((function(e){console.log(e),t.remove()}))}))};t.querySelector(".toggle-input-tag").addEventListener("click",(function(e){n.classList.contains("visually-hidden")?n.classList.remove("visually-hidden"):n.classList.add("visually-hidden")})),t.querySelectorAll(".page-tag.badge").forEach((function(e){e.addEventListener("click",c)})),n.addEventListener("change",(function(){var i=t.querySelector('option[value="'.concat(n.value,'"]'));if(i){var r=i.getAttribute("data-id"),u=i.getAttribute("data-value"),l=i.getAttribute("data-name");e.addPageTag(a,r,(function(e){var t=document.createElement("span");t.value="".concat(u," ( ").concat(l," )"),t.setAttribute("data-id",e.id),t.setAttribute("role","button"),t.classList.add("badge","bg-primary","rounded-pill"),t.innerHTML="".concat(u,' <i class="fas fa-times"></i>'),o.appendChild(t),o.appendChild(document.createTextNode(" ")),n.value="",t.addEventListener("click",c)}))}}))}))}}],null&&e(a.prototype,null),n&&e(a,n),Object.defineProperty(a,"prototype",{writable:!1}),t})().enableAutoSave(),document.querySelectorAll(".page-field-auto-complete").forEach((function(e){var t=e.querySelector(".page-field-auto-complete-search"),a=e.querySelector(".page-field-auto-complete-value");t.addEventListener("change",(function(){var n=e.querySelector('option[value="'.concat(t.value,'"]'));a.value=n?n.getAttribute("data-id"):""}))}))})();
//# sourceMappingURL=controller_admin_tag_read.bundle.js.map